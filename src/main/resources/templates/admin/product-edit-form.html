<!DOCTYPE html>
<html lang="en" xmlns:th="http:www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>상품 수정</title>
</head>
<body>

<h1>상품 수정</h1>

<form th:action="@{'/admin/products/' + ${productId} + '/edit'}" th:object="${form}" method="post" enctype="multipart/form-data">
    <div>
        <label>상품 명</label>
        <input th:field="*{name}">
        <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
    </div>

    <div>
        <label>가격</label>
        <input th:field="*{price}" type="number" min="0">
        <div th:if="${#fields.hasErrors('price')}" th.errors="*{price}"></div>
    </div>

    <div>
        <label>재고</label>
        <input th:field="*{stock}" type="number" min="0">
        <div th:if="${#fields.hasErrors('stock')}" th:errors="*{stock}"></div>
    </div>

    <div>
        <label>카테고리</label>
        <select th:field="*{categoryId}">
            <option value="">-- 선택 --</option>
            <option value="1">상의</option>
            <option value="2">하의</option>
            <option value="3">신발</option>
        </select>
    </div>

    <div>
        <label>설명</label>
        <textarea th:field="*{description}" rows="4" ></textarea>
    </div>

    <div>
        <label>기존 대표 이미지</label>
        <div th:if="${form.mainImage != null}">
            <img th:src="@{'/uploads/' + ${form.mainImage}}" alt="현재 이미지" style="width:120px; height:auto;">
        </div>
    </div>

    <div>
        <label>새 이미지 업로드</label>
        <input type="file" name="image">
        <small>(이미지를 바꾸려면 새 파일을 업로드하세요)</small>
    </div>

    <button type="submit">수정하기</button>
</form>

<a th:href="@{/}">목록으로</a>
</body>
</html>